(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,r){e.exports=r(20)},16:function(e,t,r){},19:function(e,t,r){},20:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(9),i=r.n(o),s=(r(16),r(2)),c=r.n(s),u=r(5),l=r(1),p=(r(19),r(4)),m=r(7),d=function(e){var t=Object(a.useState)(),r=Object(l.a)(t,2),o=r[0],i=r[1],s=Object(a.useState)("basemapsSlideup"),c=Object(l.a)(s,2),u=c[0],d=c[1];function b(t){if(t.preventDefault(),"a"==t.currentTarget.tagName.toLowerCase()){var r=m.basemaps.map(function(e){return e.id}).indexOf(t.currentTarget.innerHTML);e.map.basemap=o[r]}d("basemapsSlideup"==u?"basemapsSlidedown":"basemapsSlideup")}return Object(a.useEffect)(function(){return Object(p.c)(["esri/layers/WebTileLayer","esri/Basemap"]).then(function(e){var t=Object(l.a)(e,2),r=t[0],a=t[1],n=m.basemaps.map(function(e,t){var n=new r({urlTemplate:e.url,subDomains:e.subDomains});return new a({baseLayers:[n],title:e.id,id:e.id,type:"WebTiledLayer"})});i(n)}).catch(function(e){return console.error(e)}),function(){i(null)}},[]),n.a.createElement("div",{className:"basemap-buttons-container"},n.a.createElement("div",{className:"esri-widget--button esri-widget esri-interactive",role:"button",title:"Change Basemap",onClick:b},n.a.createElement("span",{"aria-hidden":"true",role:"presentation",className:"esri-icon esri-icon-basemap"}),n.a.createElement("span",{className:"esri-icon-font-fallback-text"},"Change Basemap")),n.a.createElement("div",{className:u},n.a.createElement("ul",{className:"basemapbuttons"},m.basemaps.map(function(e,t){return n.a.createElement("li",{key:t},n.a.createElement("a",{onClick:b,href:"#"},e.id))}))))},b={visible:{display:"inline-block"},hidden:{display:"none"}},g=function(e){return n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"tour-title"},n.a.createElement("div",{className:"tour-name"},"My 3D Story Tour - ",e.title?e.title:"Loading Story Tour...")),n.a.createElement("div",{className:"tour-caption"},e.caption),n.a.createElement("div",{onClick:function(){return e.onClick()},style:e.title&&!e.caption?b.visible:b.hidden,className:"tour-start"},"Start tour..."))},h=function(e){var t=Object(a.useState)(),r=Object(l.a)(t,2),n=r[0],o=r[1];return Object(a.useEffect)(function(){return Object(p.c)(["esri/layers/GeoJSONLayer","esri/layers/GraphicsLayer","esri/Graphic"]).then(function(t){var r=Object(l.a)(t,3),a=r[0],n=r[1],i=r[2],s=new a({url:e.gist,geometryType:"polyline",renderer:{type:"simple",symbol:{type:"simple-line",color:[0,255,255,.75],width:1,style:"solid"}}}),c=new a({url:e.gist,geometryType:"point",definitionExpression:"Pic is not NULL",renderer:{type:"simple",symbol:{type:"picture-marker",url:"http://shadc.github.io/presentations/images/camera-64x64.png",width:"20px",height:"20px"}}}),u=new a({url:e.gist,geometryType:"point",definitionExpression:"Pic is NULL",renderer:{type:"simple",symbol:{type:"simple-marker",size:10,color:[227,139,79,.25],outline:{color:[227,139,79,1],width:"1px"}}},labelingInfo:[{labelPlacement:"above-center",labelExpressionInfo:{value:"{LABEL}"},symbol:{type:"label-3d",symbolLayers:[{type:"text",material:{color:"white"},halo:{color:[0,0,139,.75],size:"1px"},size:10}],verticalOffset:{screenLength:50,maxWorldLength:1e3,minWorldLength:10},callout:{type:"line",size:.2,color:[0,0,0],border:{color:[255,255,255,.7]}}}}]}),p=new n;p.elevationInfo={mode:"relative-to-ground",offset:10,unit:"feet"},e.map.add(p);var m={type:"simple-marker",color:[0,255,255,.25],size:10,outline:{color:[0,255,255,1],width:"1px"}};s.when(function(){var t=s.createQuery({where:"OBJECTID = 1"});s.queryFeatures(t).then(function(t){var r=Object(l.a)(t.features[0].geometry.toJSON().paths[0][0],2),a=r[0],n=r[1],o=new i({geometry:{type:"point",x:a,y:n},symbol:m});p.add(o),e.setTour(s,c,e.view,o)})}),o([[s,c,u]]),e.map.addMany([s,c,u])}).catch(function(e){return console.error(e)}),function(){e.map.removeMany(n)}},[]),null},v=r(3),f={getSplit:function(){var e=Object(u.a)(c.a.mark(function e(t){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.queryFeatures();case 2:return r=e.sent,e.next=5,Math.min.apply(null,r.features.map(function(e){var t=e.geometry,r=Object(v.lineString)(t.paths[0]),a=3.28084*Object(v.length)(r,{units:"meters"}),n=Math.floor(a/400);return n<=5?5:n}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getScales:function(e){for(var t=e,r=0;r<19;r++){var a=t[0],n=a*(a/100+1.03);t.unshift(n)}return t},getRouteCoords:function(e,t){for(var r=[],a=Object(v.lineString)(e.paths[0]),n=3.28084*Object(v.length)(a,{units:"meters"}),o=0;o<=n/t;o++){var i=Object(v.along)(a,o*(.3048*t),{units:"meters"});r.push([i.geometry.coordinates[0],i.geometry.coordinates[1]])}return r},getGraphics:function(){var e=Object(u.a)(c.a.mark(function e(t,r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t.createQuery()).where="OBJECTID = "+r,e.next=4,t.queryFeatures(a);case 4:return e.abrupt("return",e.sent.features);case 5:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),getPicRouteIndex:function(){var e=Object(u.a)(c.a.mark(function e(t,r,a){var n,o,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.createQuery()).where="Route = '"+r+"'",e.next=4,a.queryFeatures(n);case 4:return o=e.sent,i=Object(v.lineString)(t),e.abrupt("return",o.features.map(function(e){var t=e.geometry,r=Object(v.point)([t.longitude,t.latitude]);return Object(v.nearestPointOnLine)(i,r,{units:"meters"}).properties.index}));case 7:case"end":return e.stop()}},e)}));return function(t,r,a){return e.apply(this,arguments)}}(),getUrlVars:function(e){var t=new URLSearchParams(window.location.search).get(e);return t&&"yes"==t.toLowerCase()?"true":t&&"no"==t.toLowerCase()?"false":t||"false"},getHeading:function(e,t){var r=Object(v.bearing)(Object(v.point)([e[0],e[1]]),Object(v.point)([t[0],t[1]]));return r<0?360+r:r}},y={active:"animateIn",deactive:"animateOut"},w=function(e){var t;return n.a.createElement("li",{style:(t=e.height,{"--tx":t}),className:function(e){return e.id==e.picAction[0]&&"deactive"==e.picAction[1]?"polaroidCenter animateRight":e.id<e.picAction[0]?"polaroidCenter animateRight":"polaroidCenter"}(e)},n.a.createElement("div",{className:function(e){return e.id>e.picAction[0]?"polaroid polaroidInitial":e.id==e.picAction[0]?"polaroid "+y[e.picAction[1]]:"polaroid animateOut"}(e)},n.a.createElement("img",{className:"picImage",src:e.img}),n.a.createElement("div",null,e.caption)))},S=function(e){var t=Object(a.useState)(e.initSliderVal),r=Object(l.a)(t,2),o=r[0],i=r[1];return n.a.createElement("input",{id:"slider",type:"range",min:"1",max:"20",className:"slider",value:o,onChange:function(t){i(t.target.value),e.handleChange(t.target.value)}})},O={},E=0,N=10,x=!1,j=function(){for(var e=Object(a.useState)(),t=Object(l.a)(e,2),r=t[0],o=t[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),m=s[0],b=s[1],v=Object(a.useState)([]),y=Object(l.a)(v,2),j=y[0],C=y[1],D=Object(a.useState)([0,""]),I=Object(l.a)(D,2),G=I[0],$=I[1],A="true"==f.getUrlVars("droneView"),T="true"==f.getUrlVars("hidePhotos"),k="false"==f.getUrlVars("geoJson")?"https://gist.githubusercontent.com/shadc/5f28c0d4f3d3fdf1e789/raw/4495bf6e4194adb1ce215c032c93c1fc8273e32a/Bluebird%2520Day%2520at%2520Mt.%2520Bachelor.geojson":f.getUrlVars("geoJson"),L=function(){var e=Object(u.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.routeNum=1,O.coordNum=0,M();case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(c.a.mark(function e(){var t,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.map.graphics&&O.map.graphics.removeAll(),O.routeLayer.definitionExpression="OBJECTID < "+O.routeNum,e.next=4,f.getGraphics(O.routeLayer,O.routeNum);case 4:if((t=e.sent).length){e.next=8;break}return b(""),e.abrupt("return");case 8:return r=t[0].geometry,O.routeCoords=f.getRouteCoords(r,O.splits),b(t[0].getAttribute("Caption")),e.next=13,f.getPicRouteIndex(O.routeCoords,t[0].getAttribute("Route"),O.picsLayer);case 13:O.picIndexes=e.sent,A?E=window.setInterval(J,V(N)):O.map.goTo(r).then(function(){E=window.setInterval(J,V(N))});case 15:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),U=1,J=function e(){if(O.coordNum>O.routeCoords.length-1)return clearInterval(E),O.coordNum=0,O.routeNum++,void setTimeout(function(){M()},1e3);x&&(clearInterval(E),E=window.setInterval(e,V(N)),x=!1);var t=Object(l.a)(O.routeCoords[O.coordNum],2),r=t[0],a=t[1],n={type:"point",longitude:r,latitude:a};O.pointGraphic.geometry=n;var o=O.pointGraphic.clone();if(o.symbol.set("size",1),o.geometry=n,O.map.graphics.add(o),A&&O.coordNum%2&&O.map.stationary){var i=O.coordNum>10?O.routeCoords[O.coordNum-10]:O.routeCoords[O.coordNum],s=O.coordNum<O.routeCoords.length-10?O.routeCoords[O.coordNum+10]:O.routeCoords[O.coordNum],c=f.getHeading(i,s);O.map.goTo({center:[r,a],zoom:16,heading:c,tilt:O.map.camera.tilt>1?O.map.camera.tilt:60},{speedFactor:.9,easing:"linear"})}!T&&O.picIndexes.includes(O.coordNum)&&(clearInterval(E),$([U,"active"]),setTimeout(function(){$([U,"deactive"]),setTimeout(function(){E=window.setInterval(e,V(N)),U++},1e3)},4e3)),O.coordNum++},B=function(){var e=Object(u.a)(c.a.mark(function e(t,r,a,n){var i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.routeLayer=t,O.picsLayer=r,O.map=a,O.pointGraphic=n,O.routeNum=1,O.coordNum=0,O.scales=f.getScales([4]),e.next=7,f.getSplit(t);case 7:return O.splits=e.sent,t.queryExtent().then(function(e){O.map.goTo(e.extent.expand(2),{easing:"in-out-expo"})}),e.t0=C,e.next=12,r.queryFeatures();case 12:e.t1=e.sent.features,(0,e.t0)(e.t1),i=decodeURI(decodeURI(k.substring(k.lastIndexOf("/")+1))),o(i.substr(0,i.lastIndexOf("."))||i);case 16:case"end":return e.stop()}},e)}));return function(t,r,a,n){return e.apply(this,arguments)}}(),P=[4],R=0;R<19;R++){var W=P[0],_=W*(W/100+1.03);P.unshift(_)}var V=function(e){return P[e-1]};return n.a.createElement(n.a.Fragment,null,n.a.createElement(g,{caption:m,title:r,onClick:L}),n.a.createElement(p.b,{loaderOptions:{url:"http://js.arcgis.com/4.11"},className:"mapcontainer",mapProperties:{ground:"world-elevation"},viewProperties:{zoom:2}},n.a.createElement(S,{handleChange:function(e){N=e,x=!0},initSliderVal:N}),n.a.createElement(h,{view:p.b,map:p.a,gist:k,setTour:B}),n.a.createElement(d,{view:p.b,map:p.a})),n.a.createElement("ul",null,j.map(function(e,t){return n.a.createElement(w,{key:t,height:10/(j.length+1)*(t+1)*10+"vh",id:t+1,picAction:G,caption:e.getAttribute("Caption"),img:"http://shadc.github.io/presentations/"+e.getAttribute("Pic")})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},7:function(e){e.exports={basemaps:[{id:"MapBox Run/Bike/Hike",visible:!1,subDomains:["a","b","c","d"],copyright:"MapBox",url:"http://{subDomain}.tiles.mapbox.com/v4/mapbox.run-bike-hike/${level}/${col}/${row}.png?access_token=pk.eyJ1Ijoic2hhZGMiLCJhIjoiZjRUSnJTYyJ9.gUL3T1N9m_twjfHArn-UNw"},{id:"MapBox Outdoors",visible:!1,subDomains:["a","b","c","d"],copyright:"MapBox",url:"http://{subDomain}.tiles.mapbox.com/v4/mapbox.outdoors/${level}/${col}/${row}.png?access_token=pk.eyJ1Ijoic2hhZGMiLCJhIjoiZjRUSnJTYyJ9.gUL3T1N9m_twjfHArn-UNw"},{id:"MapBox Dark",visible:!1,subDomains:["a","b","c","d"],copyright:"MapBox",url:"http://{subDomain}.tiles.mapbox.com/v4/mapbox.dark/${level}/${col}/${row}.png?access_token=pk.eyJ1Ijoic2hhZGMiLCJhIjoiZjRUSnJTYyJ9.gUL3T1N9m_twjfHArn-UNw"},{id:"National Geographic",visible:!1,subDomains:["services","server"],copyright:"National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC",url:"http://{subDomain}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/${level}/${row}/${col}"},{id:"Esri World Imagery",visible:!0,subDomains:["services","server"],copyright:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community ",url:"http://{subDomain}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/${level}/${row}/${col}"},{id:"Esri World Topo",visible:!1,subDomains:["services","server"],copyright:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community ",url:"http://{subDomain}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/${level}/${row}/${col}"},{id:"Esri Street Map",visible:!1,subDomains:["services","server"],copyright:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community ",url:"http://{subDomain}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/${level}/${row}/${col}"},{id:"Stamen Watercolor",visible:!1,subDomains:["a","b","c","d"],copyright:"Stamen Watercolor",url:"http://{subDomain}.tile.stamen.com/watercolor/${level}/${col}/${row}.jpg"},{id:"Open Cycle Map",visible:!1,subDomains:["a","b","c"],copyright:"Open Cycle Map",url:"http://{subDomain}.tile.opencyclemap.org/cycle/${level}/${col}/${row}.png"},{id:"Open Street Map",visible:!1,subDomains:["a","b","c"],copyright:"Open Street Maps",url:"https://{subDomain}.tile.openstreetmap.org/${level}/${col}/${row}.png"},{id:" Open Topo Map",visible:!1,subDomains:["a","b","c"],copyright:"Open Topo Map",url:"https://{subDomain}.tile.opentopomap.org/${level}/${col}/${row}.png"},{id:"Thunderforest Outdoors",visible:!1,subDomains:["a","b","c"],copyright:"Thunderforest",url:"https://{subDomain}.tile.thunderforest.com/outdoors/${level}/${col}/${row}.png?apikey=a5dd6a2f1c934394bce6b0fb077203eb"},{id:"Thunderforest Spinal Map",visible:!1,subDomains:["a","b","c"],copyright:"Thunderforest",url:"https://{subDomain}.tile.thunderforest.com/spinal-map/${level}/${col}/${row}.png?apikey=a5dd6a2f1c934394bce6b0fb077203eb"},{id:" Deschutes County Imagery",visible:!1,copyright:" Deschutes County Imagery",url:"https://maps.deschutes.org/arcgis/rest/services/Dial/DOQ_Deschutes_1ft/MapServer/tile/${level}/${row}/${col}"}]}}},[[10,1,2]]]);
//# sourceMappingURL=main.72a67b16.chunk.js.map